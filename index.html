<!DOCTYPE html>
<html lang="en">
	<head>
	<meta charset="utf-8">
	<title>index.d - dlogg documentation</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- styles -->
	<link href="bootDoc/assets/css/bootstrap.css" rel="stylesheet">
	<style type="text/css">
		body {
		padding-top: 60px;
		padding-bottom: 40px;
		}
		.sidebar-nav {
		padding: 9px 0;
		}
	</style>
	<link href="bootDoc/assets/css/bootstrap-responsive.css" rel="stylesheet">
	<link href="bootDoc/bootdoc.css" rel="stylesheet">

	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- fav and touch icons -->
	<link rel="shortcut icon" href="">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootDoc/assets/ico/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootDoc/assets/ico/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="bootDoc/assets/ico/apple-touch-icon-57-precomposed.png">
	
	<!-- Introduce DDoc settings required by JavaScript -->
	<script type="text/javascript">
		var Title = 'index.d';
		var SourceRepository = 'https://github.com/NCrashed/dlogg/tree/master/source';
		var PackageSeparator = '.';
	</script>
	
	<style type="text/css">
		.ddoc-icon-variable { background-image: url('bootDoc/ddoc-icons/var.png'); }
		.ddoc-icon-function { background-image: url('bootDoc/ddoc-icons/func.png'); }
		.ddoc-icon-property { background-image: url('bootDoc/ddoc-icons/property.png'); }
		.ddoc-icon-struct { background-image: url('bootDoc/ddoc-icons/struct.png'); }
		.ddoc-icon-class { background-image: url('bootDoc/ddoc-icons/class.png'); }
		.ddoc-icon-enum { background-image: url('bootDoc/ddoc-icons/enum.png'); }
		.ddoc-icon-template { background-image: url('bootDoc/ddoc-icons/template.png'); }
	</style>
	</head>

	<body>
	<!--
	JavaScript reaps the module list from this element.
	This is required for the MODULES macro to be reusable
	in a noscript element later.
	-->
	<ul id="module-list-source" class="hidden">
		
	<li class="sidebar-list-entry tree-leaf"><a href="dlogg.log.html" title="dlogg.log"><i class="icon-th"></i>dlogg.log</a></li>
	<li class="sidebar-list-entry tree-leaf"><a href="dlogg.strict.html" title="dlogg.strict"><i class="icon-th"></i>dlogg.strict</a></li>
	<li class="sidebar-list-entry tree-leaf"><a href="dlogg.buffered.html" title="dlogg.buffered"><i class="icon-th"></i>dlogg.buffered</a></li>
	<li class="sidebar-list-entry tree-leaf"><a href="dlogg.style.html" title="dlogg.style"><i class="icon-th"></i>dlogg.style</a></li>
	</ul>
	
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container-fluid">
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</a>
				<a class="brand" href="index.html">dlogg</a>
				<div class="nav-collapse">
					<ul class="nav">
						<li class="active"><a href="index.html">Reference</a></li>
					</ul>
					
					<form id="gotosymbol" class="navbar-search pull-left hidden">
						<input type="text" class="search-query" placeholder="Go to symbol in index.d" data-provide="typeahead" data-items="4">
					</form>
					
					<p class="navbar-text pull-right"><a href="https://github.com/NCrashed/dlogg/tree/master">Github Page</a></p>
				</div><!--/.nav-collapse -->
			</div>
		</div>
	</div>

	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span2">
				<div class="well sidebar-nav">
				<ul class="nav nav-list">
					<li id="module-list" class="nav-header sidebar-list-entry">Modules<li>
					<noscript>
						
	<li class="sidebar-list-entry tree-leaf"><a href="dlogg.log.html" title="dlogg.log"><i class="icon-th"></i>dlogg.log</a></li>
	<li class="sidebar-list-entry tree-leaf"><a href="dlogg.strict.html" title="dlogg.strict"><i class="icon-th"></i>dlogg.strict</a></li>
	<li class="sidebar-list-entry tree-leaf"><a href="dlogg.buffered.html" title="dlogg.buffered"><i class="icon-th"></i>dlogg.buffered</a></li>
	<li class="sidebar-list-entry tree-leaf"><a href="dlogg.style.html" title="dlogg.style"><i class="icon-th"></i>dlogg.style</a></li>
					</noscript>
					<li id="symbol-list" class="nav-header sidebar-list-entry hidden">index.d</li>
				</ul>
				</div><!--/.well -->
			</div><!--/span-->
			
			<div class="span10">
				<div class="row-fluid">
					<div class="span11">
						<ul id="module-breadcrumb" class="breadcrumb">
							<noscript><h1>index.d</h1></noscript>
						</ul>
						
					</div>
					<div class="span1 offset11">
						<a href="index.html"><img src="" alt="dlogg"/></a>
					</div>
				</div>
				<div id="declaration-list">
					<!-- Generated by Ddoc from index.d -->
<dl><p><h1>Strict logger</h1>
</p>
<p>Each logger in the package implements `dlogg.ILogger` interface and forced to be shared between threads. There are 5 different styles of logg messages:
<pre class="d_code"><span class="d_keyword">enum</span> LoggingLevel
{
    Notice,
    Warning,
    Debug,
    Fatal,
    Muted <span class="d_comment">// Used only to mute all writing to console
</span>}
</pre>
So, to put message in log you can use:
<pre class="d_code">  <span class="d_keyword">void</span> ILogger.log(<span class="d_keyword">lazy</span> string message, LoggingLevel level) <span class="d_keyword">shared</span>;
</pre>
Or one of handy wrappers:
<pre class="d_code">  <span class="d_keyword">final</span> <span class="d_keyword">nothrow</span> <span class="d_keyword">shared</span>
  {
    <span class="d_keyword">void</span> logDebug(E...)(E args) <span class="d_keyword">shared</span> @trusted; <span class="d_comment">// not lazy
</span>    <span class="d_keyword">void</span> ILogger.logInfo(<span class="d_keyword">lazy</span> string message);
    <span class="d_keyword">void</span> ILogger.logWarning(<span class="d_keyword">lazy</span> string message);
    <span class="d_keyword">void</span> ILogger.logError(<span class="d_keyword">lazy</span> string message);
  }
</pre>
Note that major logging funcs are lazy and we don't have overhead while logg call isn't needed but in strict version D performs string concatinations.
<br><br>

And finally full example:
<pre class="d_code">   <span class="d_keyword">shared</span> ILogger logger = <span class="d_keyword">new</span> StrictLogger(<span class="d_string">"my_awesome_log.log"</span>);
   logger.minOutputLevel = LoggingLevel.Warning; <span class="d_comment">// info msgs won't be printed in console
</span>   logger.logInfo(<span class="d_string">"Info message!"</span>);
   logger.logError(<span class="d_string">"Error message!"</span>);
   logger.logDebug(<span class="d_string">"Debug message!"</span>);
</pre>
Output file:
<pre class="d_code">[2014-04-06T19:50:22.8193333]:Notice: Notice msg!
[2014-04-06T19:50:22.819406]:Warning: Warning msg!
[2014-04-06T19:50:22.8194323]:Debug: Debug msg!
[2014-04-06T19:50:22.8194548]:Error: Fatal msg!
</pre>
<br><br>

<b>minOutputLevel</b> property controls which message types should be printed in console. `LoggingLevel.Muted` is used to create daemon loggers that don't try to write into stdout.
<br><br>

<h1>Buffered logger</h1>
In many cases (for instance, unittesting) we don't want log output just in time. Buffered logger adds control when messages would be written into wrapped log. Example:
<pre class="d_code">   <span class="d_keyword">auto</span> delayed = <span class="d_keyword">new</span> <span class="d_keyword">shared</span> BufferedLogger(logger); <span class="d_comment">// wrapping a logger
</span>   <span class="d_keyword">scope</span>(exit) delayed.finalize(); <span class="d_comment">// write down information in wrapped logger
</span>   <span class="d_keyword">scope</span>(failure) delayed.minOutputLevel = LoggingLevel.Notice; <span class="d_comment">// if failed, spam in console
</span>   delayed.logNotice(<span class="d_string">"Hello!"</span>);

   <span class="d_comment">// do something that can fail
</span></pre>
<br><br>

<h1>Log rotating</h1>
<b>StrictLogger.reload</b> function checks if the log file is exists at specified location and if can't find it, recreates the file and continues write into it. Useful for <a href=http://linuxcommand.org/man_pages/logrotate8.html>logrotate</a> utility. GNU/Linux system checks file identity by inode, that doesn't change while renaming. Thus after renaming the file at location log continues write into the renamed file. The call to the reload method force splitting log into two parts.</p>
</dl>

				</div>
				
				<hr>
				
				<footer class="pull-left">
					<p>Page generated with <a href="https://github.com/JakobOvrum/bootDoc">bootDoc</a>.</p>
				</footer>
				
				<footer class="pull-right">
					<p>&copy; Anton Gushcha 2014-2014</p>
				</footer>
			</div>
		</div>
	</div><!--/.fluid-container-->

	<!-- Bootstrap javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="bootDoc/assets/js/jquery.min.js"></script>
	<script src="bootDoc/assets/js/bootstrap.min.js"></script>
	
	<!-- bootDoc javascript
	================================================== -->
	<script src="bootDoc/bootdoc.js"></script>
	
	</body>
</html>
